<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>Graphy.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">Project Name</a> &gt; <a href="index.source.html" class="el_package">htron.statelist</a> &gt; <span class="el_source">Graphy.java</span></div><h1>Graphy.java</h1><pre class="source lang-java linenums">package htron.statelist;

import java.awt.Color;
import java.awt.Font;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.Polygon;
import java.awt.RenderingHints;
import java.awt.Stroke;
import java.awt.geom.Ellipse2D;
import java.awt.geom.Line2D;

import javax.swing.BorderFactory;
import javax.swing.JPanel;

public class Graphy extends JPanel {
    StateLabel stateLabel;
<span class="nc" id="L18">    int marg = 30;</span>
<span class="nc" id="L19">    int elementsNum = 3;</span>
<span class="nc" id="L20">    public Graphy(StateLabel stateLabel) {</span>
<span class="nc" id="L21">        this.stateLabel = stateLabel;</span>
<span class="nc" id="L22">        this.setBorder(BorderFactory.createLineBorder(Color.gray));</span>
<span class="nc" id="L23">    }</span>
    
    @Override
    protected void paintComponent (Graphics g) {
<span class="nc" id="L27">        super.paintComponent(g);</span>

<span class="nc" id="L29">        Graphics2D graph2D = (Graphics2D) g.create(); // create new instance (safer)</span>

<span class="nc" id="L31">        graph2D.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);  </span>

<span class="nc" id="L33">        int width = this.getWidth();</span>
<span class="nc" id="L34">        int height = this.getHeight();</span>
        double x1;
        double y1; 

        // vertical coordinate line 
<span class="nc" id="L39">        graph2D.draw(</span>
            new Line2D.Double(
                //top marker
                marg, /** x1 */
                marg, /** y1 */
                
                //bottom marker
                marg, /** x2 */
                (double) height - marg /** y2 */
            ) 
        );
        
        // horizontal coordinate line 
<span class="nc" id="L52">        graph2D.draw(</span>
            new Line2D.Double(
                //bottom marker
                marg, /** x1 */
                (double)  height - marg, /** y1 */
                
                //bottom-right marker
                (double) width - marg, /** x2 */
                (double) height - marg  /** y1 */
            ) 
        );

<span class="nc" id="L64">        double x = (double) (width - 2*marg) / elementsNum;</span>

<span class="nc" id="L66">        double scaleFactor = (height - 2*marg) / this.getMax(); // mult y values by this to normalize amplitude samples </span>

        // paint point color (marker)
<span class="nc" id="L69">        graph2D.setPaint(Color.RED);</span>

        // graph2D = (Graphics2D) g.create(); // create new instance (safer)

        // old stroke 
<span class="nc" id="L74">        Stroke oldStroke = graph2D.getStroke();</span>

<span class="nc bnc" id="L76" title="All 2 branches missed.">        for (int i =0; i &lt; this.stateLabel.getIconCollectionLength(); i++) {</span>
<span class="nc" id="L77">            x1 = marg + i * x;</span>
<span class="nc" id="L78">            y1 = height - marg - (scaleFactor * this.stateLabel.getIcon(i).getCount());</span>
            
            // plot sample point 
<span class="nc" id="L81">            graph2D.fill(new Ellipse2D.Double(x1 - 1,y1 - 1,2,2));</span>

            //   Set the stroke of the copy, not the original 
            // Stroke dashed = new BasicStroke(1, BasicStroke.CAP_BUTT, BasicStroke.JOIN_BEVEL, 0, new float[]{4}, 0);

            // String test 
<span class="nc" id="L87">            this.stringTest(g, this.stateLabel.getIcon(i).getID(), (int) x1, height - marg );</span>
            
            // x_markers
<span class="nc" id="L90">            this.xMarkersTest(g, (int)x1, height - marg);</span>

            // polygon 
<span class="nc" id="L93">            this.polygonTest(g, x1,  y1, marg, (double)height - marg , x * (i + 1));</span>

            // set stroke 
            // graph2D.setStroke(dashed);
            
<span class="nc" id="L98">            graph2D.draw(</span>
                new Line2D.Double(
                    x1, 
                    y1, 
                    x1 + x,
                    y1
                )
            );

             // set stroke back to original 
<span class="nc" id="L108">            graph2D.setStroke(oldStroke);</span>
        }

<span class="nc" id="L111">    }    </span>

    private double getMax() {
<span class="nc" id="L114">        double max = -Integer.MAX_VALUE / 1.0; </span>
<span class="nc bnc" id="L115" title="All 2 branches missed.">        for (int i = 0; i &lt; this.stateLabel.getIconCollectionLength() ; i++ ) {</span>
<span class="nc bnc" id="L116" title="All 2 branches missed.">            if (max &lt;  this.stateLabel.getIcon(i).getCount() ) {</span>
<span class="nc" id="L117">                max = this.stateLabel.getIcon(i).getCount() ;</span>
            }
        }

<span class="nc bnc" id="L121" title="All 2 branches missed.">        if (max == 0) {</span>
<span class="nc" id="L122">            max = 1;</span>
        }
<span class="nc" id="L124">        return max;</span>
    }

    private void stringTest(Graphics g, String s, int x,int  y) {
<span class="nc" id="L128">        Graphics2D graph2D = (Graphics2D) g.create(); // create new instance (safer)</span>
<span class="nc" id="L129">        graph2D.setFont(new Font(Font.SANS_SERIF, Font.PLAIN, 8));</span>
<span class="nc" id="L130">        graph2D.drawString(s, x+10 , y + 10);</span>
<span class="nc" id="L131">    } </span>

    private void xMarkersTest(Graphics g, int x,int  y) {
<span class="nc" id="L134">        Graphics2D graph2D = (Graphics2D) g.create(); // create new instance (safer)</span>
<span class="nc" id="L135">        graph2D.setColor(Color.darkGray);</span>
<span class="nc" id="L136">        graph2D.draw(</span>
            new Line2D.Double(x , (double) y-5 ,x, (double)y +5)
        );
<span class="nc" id="L139">    } </span>

    private void polygonTest(Graphics g, double x,double  y, double xOrigin,  double  yOrigin, double xDelta) {
<span class="nc" id="L142">        Graphics2D graph2D = (Graphics2D) g.create(); // create new instance (safer)</span>
<span class="nc" id="L143">        Polygon p = new Polygon();</span>
        
<span class="nc" id="L145">        p.addPoint((int)x, (int)yOrigin);</span>
<span class="nc" id="L146">        p.addPoint( (int)x,  (int)y);</span>
<span class="nc" id="L147">        p.addPoint( (int)xDelta, (int)y);</span>
<span class="nc" id="L148">        p.addPoint( (int)xDelta,(int) yOrigin);</span>
        
<span class="nc" id="L150">        graph2D.drawPolygon(p);</span>
<span class="nc" id="L151">        graph2D.setColor(Color.ORANGE);</span>
<span class="nc" id="L152">        graph2D.fillPolygon(p);</span>
<span class="nc" id="L153">        graph2D.setColor(Color.GRAY);</span>

<span class="nc" id="L155">        graph2D.dispose();</span>
<span class="nc" id="L156">    } </span>

}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.4.201905082037</span></div></body></html>